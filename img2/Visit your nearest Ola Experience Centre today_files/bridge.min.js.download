const owOS=()=>{var userAgent=window.navigator.userAgent
if(userAgent.match(/iPad/i)||userAgent.match(/iPhone/i)){return"ios";}else if(userAgent.match(/android/i)){return"android";}else if(userAgent.match(/Windows Phone/i)){return"windowsMbl";}else if(userAgent.match(/Mobile/i)){return"Mobile";}else{return"desktop";}};const isIOS=()=>{return owOS()=="ios"}
var isWebview=Boolean(window.OlaJSNativeBridge||window.OlaElectricJSNativeBridge,);window.OlaJSNativeBridge=window.OlaJSNativeBridge||window.OlaElectricJSNativeBridge||{};window.OlaJSNativeBridge.appEventListeners={};window.OlaJSNativeBridge.nativeToWeb=function(eventName,data){data=data||{};var currentListeners=this.appEventListeners[eventName]||[];if(!currentListeners.length){return;}
try{var clLength=currentListeners.length;for(var i=0;i<clLength;i++){if(currentListeners[i]){currentListeners[i](JSON.parse(data));}}}catch(error){throw new error(error);}};window.OlaJSNativeBridge.webToNative=window.OlaJSNativeBridge.webToNative||function(eventName,data){console.log(eventName,data);};window.OlaJSNativeBridge.addAppEventListener=function(eventName,callback,data,){var currentListeners=this.appEventListeners[eventName]||[];data=data||{};currentListeners.push(callback);this.appEventListeners[eventName]=currentListeners;if(window.webkit&&window.webkit.messageHandlers){window.webkit.messageHandlers[eventName].postMessage(data);}else{this.webToNative(eventName,callback?'nativeToWeb':'',JSON.stringify(data),);}
return{eventName:eventName,pos:currentListeners.length-1,};};window.OlaJSNativeBridge.removeAppEventListener=function(ref){this.appEventListeners[ref.eventName][ref.pos]=undefined;};const handleNativeCall=(phoneNumber)=>{console.log('Calling native call');window.OlaJSNativeBridge.addAppEventListener('emergency',()=>{console.log('callback finished');},{number:`${phoneNumber}`,call:true,},);if(window.webkit&&window.webkit.messageHandlers){console.log('inside window.webkit');try{window.webkit.messageHandlers.emergency.postMessage(params);}catch(e){}}};function openLinkInExternalBrowser(url){console.log("Opening link in external browser");const a=document.createElement('a');a.style.display='none';a.target='_blank';if(getCookie('app_to_discovery')=='1'){a.target='_blank';a.href='external-'+url;}else{a.href=url;}
document.body.append(a);a.click();}
function makeCall(number){console.log("Making call");if(getCookie('app_to_discovery')=='1'&&isIOS()){handleNativeCall(number);}else{if(String(number).includes("+91")){window.open('tel://'+number);}
else{window.open('tel://+91'+number);}}}